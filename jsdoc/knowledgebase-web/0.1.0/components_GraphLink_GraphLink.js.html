<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/GraphLink/GraphLink.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/GraphLink/GraphLink.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module /components/GraphLink
 */

import React from 'react';
import PropTypes from 'prop-types';
import './GraphLink.css';
import config from '../../config.json';

const LABEL_BASELINE_SHIFT = 4;
const SELECTED_OPACITY = 1;
const DEFAULT_OPACITY = 0.7;
const FADED_OPACITY = 0.4;
const START_OFFSET = '20%';

const { NODE_RADIUS, ARROW_LENGTH } = config.GRAPH_PROPERTIES;
const isFirefox = typeof InstallTrigger !== 'undefined';
/**
 * Display component for graph link objects. Rendered as a straight link from a
 * source node to a target. With an arrow marker on the end, hovering just
 * outside the target node bounds.
 */
function GraphLink(props) {
  const {
    link,
    bold,
    faded,
    color,
    labelKey,
    marker,
    handleClick,
  } = props;

  if (link.source === link.target) return null;

  const left = link.source.x &lt; link.target.x;

  let label = '';
  if (labelKey &amp;&amp; labelKey.includes('.')) {
    const keys = labelKey.split('.');
    label = link.data[keys[0]][keys[1]];
  } else if (labelKey) {
    label = link.data[labelKey];
  }

  let opacity = DEFAULT_OPACITY;

  if (bold) {
    opacity = SELECTED_OPACITY;
  }
  if (faded) {
    opacity = FADED_OPACITY;
  }

  const dx = link.target.x - link.source.x;
  const dy = link.target.y - link.source.y;

  let angle = 0;

  if (dx === 0) {
    angle = dy > 0 ? Math.PI / 2 : Math.PI * 3 / 2;
  } else if (dy === 0) {
    angle = dx > 0 ? 0 : Math.PI;
  } else {
    angle = Math.atan((dx &lt; 0 ? -dy : dy) / dx);
  }

  const start = {
    x: link.source.x + (dx &lt; 0 ? -1 : 1) * Math.cos(angle) * NODE_RADIUS,
    y: link.source.y + Math.sin(angle) * NODE_RADIUS,
  };
  const end = isFirefox
    ? { x: link.target.x, y: link.target.y }
    : {
      x: link.target.x - (dx &lt; 0 ? -1 : 1) * Math.cos(angle) * (NODE_RADIUS + 3 * ARROW_LENGTH),
      y: link.target.y - Math.sin(angle) * (NODE_RADIUS + 3 * ARROW_LENGTH),
    };

  return (
    &lt;g>
      &lt;path
        className="link-widen"
        d={`M${start.x || 0} ${start.y || 0}L${end.x || 0} ${end.y || 0}`}
        onClick={handleClick}
      />
      &lt;path
        className="link"
        id={`link${link.data['@rid']}`}
        d={`M${start.x || 0} ${start.y || 0}L${end.x || 0} ${end.y || 0}`}
        markerEnd={marker}
        style={{ opacity, strokeOpacity: opacity }}
        fill={color}
        stroke={color}
        onClick={handleClick}
      />
      {labelKey &amp;&amp; (
        &lt;text
          fill={color}
          opacity={opacity}
          onClick={handleClick}
          className="link-label"
        >
          &lt;textPath
            href={`#link${link.data['@rid']}`}
            startOffset={START_OFFSET}
            side={left ? 'left' : 'right'}
            baselineShift={LABEL_BASELINE_SHIFT}
          >
            {label}
          &lt;/textPath>
        &lt;/text>
      )}
    &lt;/g>
  );
}

GraphLink.propTypes = {
  /**
   * @param {Object} link - Graph link object.
   */
  link: PropTypes.object.isRequired,
  /**
   * @param {boolean} faded - Flag for fading link.
   */
  faded: PropTypes.bool,
  /**
   * @param {string} labelKey - property to label link by.
   */
  labelKey: PropTypes.string,
  /**
   * @param {string} color - color of link. CSS color syntax(es).
   */
  color: PropTypes.string,
  /**
   * @param {function} handleClick - handler for clicking link.
   */
  handleClick: PropTypes.func,
  /**
   * @param {boolean} bold - Flag for boldening link.
   */
  bold: PropTypes.bool,
  /**
   * @param {string} marker - SVG end marker identifier.
   */
  marker: PropTypes.string,
};

GraphLink.defaultProps = {
  faded: false,
  bold: false,
  labelKey: null,
  color: '#999',
  handleClick: null,
  marker: '',
};

export default GraphLink;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-_App.html">/App</a></li><li><a href="module-_components_AutoSearchComponent.html">/components/AutoSearchComponent</a></li><li><a href="module-_components_DownloadFileComponent.html">/components/DownloadFileComponent</a></li><li><a href="module-_components_GraphActionsNode.html">/components/GraphActionsNode</a></li><li><a href="module-_components_GraphComponent.html">/components/GraphComponent</a></li><li><a href="module-_components_GraphLink.html">/components/GraphLink</a></li><li><a href="module-_components_GraphNode.html">/components/GraphNode</a></li><li><a href="module-_components_NodeDetailComponent.html">/components/NodeDetailComponent</a></li><li><a href="module-_components_NodeFormComponent.html">/components/NodeFormComponent</a></li><li><a href="module-_components_ResourceSelectComponent.html">/components/ResourceSelectComponent</a></li><li><a href="module-_components_TableComponent.html">/components/TableComponent</a></li><li><a href="module-_services_api.html">/services/api</a></li><li><a href="module-_services_auth.html">/services/auth</a></li><li><a href="module-_services_util.html">/services/util</a></li><li><a href="module-_views_AddNodeView.html">/views/AddNodeView</a></li><li><a href="module-_views_AdvancedQueryView.html">/views/AdvancedQueryView</a></li><li><a href="module-_views_DataView.html">/views/DataView</a></li><li><a href="module-_views_EditNodeView.html">/views/EditNodeView</a></li><li><a href="module-_views_ErrorView.html">/views/ErrorView</a></li><li><a href="module-_views_FeedbackView.html">/views/FeedbackView</a></li><li><a href="module-_views_LoginView.html">/views/LoginView</a></li><li><a href="module-_views_NodeDetailView.html">/views/NodeDetailView</a></li><li><a href="module-_views_QueryView.html">/views/QueryView</a></li><li><a href="module-services_history.html">services/history</a></li></ul><h3>Classes</h3><ul><li><a href="module-_App-App.html">App</a></li><li><a href="module-_components_AutoSearchComponent-AutoSearchComponent.html">AutoSearchComponent</a></li><li><a href="module-_components_GraphComponent-GraphComponent.html">GraphComponent</a></li><li><a href="module-_components_GraphNode-GraphNode.html">GraphNode</a></li><li><a href="module-_components_NodeDetailComponent-NodeDetailComponent.html">NodeDetailComponent</a></li><li><a href="module-_components_NodeFormComponent-NodeFormComponent.html">NodeFormComponent</a></li><li><a href="module-_components_TableComponent-TableComponent.html">TableComponent</a></li><li><a href="module-_views_AddNodeView-AddNodeView.html">AddNodeView</a></li><li><a href="module-_views_AdvancedQueryView-AdvancedQueryView.html">AdvancedQueryView</a></li><li><a href="module-_views_DataView-DataView.html">DataView</a></li><li><a href="module-_views_EditNodeView-EditNodeView.html">EditNodeView</a></li><li><a href="module-_views_ErrorView-ErrorView.html">ErrorView</a></li><li><a href="module-_views_LoginView-LoginView.html">LoginView</a></li><li><a href="module-_views_NodeDetailView-NodeDetailView.html">NodeDetailView</a></li><li><a href="module-_views_QueryView-QueryView.html">QueryView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Aug 17 2018 13:28:05 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
